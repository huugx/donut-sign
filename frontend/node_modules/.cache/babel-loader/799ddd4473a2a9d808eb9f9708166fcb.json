{"ast":null,"code":"import _slicedToArray from\"/Users/hugo/Documents/Code/Scripts/donut-sign/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _regeneratorRuntime from\"/Users/hugo/Documents/Code/Scripts/donut-sign/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/hugo/Documents/Code/Scripts/donut-sign/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import React,{useState}from\"react\";import{ethers}from\"ethers\";import{useDonuts}from\"./useDonuts\";import{formatEther}from\"@ethersproject/units\";import{shortNum}from\"./utils\";import Jazzicon,{jsNumberForAddress}from'react-jazzicon';import'./WalletInfo.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ConnectYourWalletButton=function ConnectYourWalletButton(_ref){var connect=_ref.connect;return/*#__PURE__*/_jsx(\"div\",{className:\"nav\",children:/*#__PURE__*/_jsx(\"div\",{className:\"wallet\",children:/*#__PURE__*/_jsx(\"span\",{className:\"connect-btn\",onClick:connect,children:\"Connect Wallet\"})})});};var ConnetToWeb3=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var provider,signer,network,address;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!window.ethereum){_context.next=21;break;}_context.prev=1;_context.next=4;return window.ethereum.request({method:'eth_requestAccounts'});case 4:if(!(typeof window.ethereum!=='undefined')){_context.next=16;break;}provider=new ethers.providers.Web3Provider(window.ethereum,\"any\");_context.next=8;return provider.getSigner();case 8:signer=_context.sent;_context.next=11;return provider.getNetwork();case 11:network=_context.sent;_context.next=14;return signer.getAddress();case 14:address=_context.sent;return _context.abrupt(\"return\",{provider:provider,signer:signer,network:network,address:address});case 16:_context.next=21;break;case 18:_context.prev=18;_context.t0=_context[\"catch\"](1);if(_context.t0.code===4001){}case 21:case\"end\":return _context.stop();}}},_callee,null,[[1,18]]);}));return function ConnetToWeb3(){return _ref2.apply(this,arguments);};}();var WalletDetails=function WalletDetails(_ref3){var address=_ref3.address,donuts=_ref3.donuts;var shorthand=address.substring(0,6)+'...'+address.substring(address.length-4);return/*#__PURE__*/_jsx(\"div\",{className:\"nav\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"wallet\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"donut-bal\",children:[shortNum(donuts),\"  \\uD83C\\uDF69\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"address-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"short-address\",children:shorthand}),/*#__PURE__*/_jsx(\"div\",{className:\"jazz-icon\",children:/*#__PURE__*/_jsx(Jazzicon,{diameter:18,seed:jsNumberForAddress(address)})})]})]})});};export default function WalletInfo(props){var _useState=useState({}),_useState2=_slicedToArray(_useState,2),address=_useState2[0],setAddress=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),provider=_useState4[0],setProvider=_useState4[1];var _useState5=useState({}),_useState6=_slicedToArray(_useState5,2),network=_useState6[0],setNetwork=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),active=_useState8[0],setActive=_useState8[1];var _useState9=useState(),_useState10=_slicedToArray(_useState9,2),donutBalance=_useState10[0],setDonutBalance=_useState10[1];var handleConnect=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var active;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return ConnetToWeb3();case 2:active=_context2.sent;if(active){setProvider(active.provider);setAddress(active.address);setNetwork(active.network);setActive(true);props.onConnect(true);}else{setActive(false);}case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function handleConnect(){return _ref4.apply(this,arguments);};}();useDonuts(active,provider,address,network).then(function(result){setDonutBalance(formatEther(result.donutBalance.toString()));});return/*#__PURE__*/_jsx(\"div\",{children:!active?/*#__PURE__*/_jsx(ConnectYourWalletButton,{connect:handleConnect}):/*#__PURE__*/_jsx(WalletDetails,{address:address,donuts:donutBalance})});};","map":{"version":3,"sources":["/Users/hugo/Documents/Code/Scripts/donut-sign/frontend/src/components/wallet/WalletInfo.js"],"names":["React","useState","ethers","useDonuts","formatEther","shortNum","Jazzicon","jsNumberForAddress","ConnectYourWalletButton","connect","ConnetToWeb3","window","ethereum","request","method","provider","providers","Web3Provider","getSigner","signer","getNetwork","network","getAddress","address","code","WalletDetails","donuts","shorthand","substring","length","WalletInfo","props","setAddress","setProvider","setNetwork","active","setActive","donutBalance","setDonutBalance","handleConnect","onConnect","then","result","toString"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport { ethers } from \"ethers\";\nimport { useDonuts } from \"./useDonuts\";\nimport { formatEther } from \"@ethersproject/units\";\nimport { shortNum } from \"./utils\";\nimport Jazzicon, { jsNumberForAddress } from 'react-jazzicon';\nimport './WalletInfo.css';\n\nconst ConnectYourWalletButton = ({ connect }) => {\n  return (\n    <div className=\"nav\"> \n      <div className=\"wallet\"> \n        <span className=\"connect-btn\" onClick={ connect }>Connect Wallet</span>\n      </div>\n    </div>\n  )\n}\n\nconst ConnetToWeb3 = async () => {\n  if (window.ethereum) {\n    try {\n      await window.ethereum.request({ method: 'eth_requestAccounts' });\n      if (typeof window.ethereum !== 'undefined') {       \n        let provider = new ethers.providers.Web3Provider(window.ethereum, \"any\");\n        let signer = await provider.getSigner();\n        let network = await provider.getNetwork();\n        let address = await signer.getAddress();\n\n      return {\n        provider,\n        signer,\n        network,\n        address\n      }\n    }\n    } catch (error) {\n      if (error.code === 4001) {\n      }\n    }\n  }\n};\n\nconst WalletDetails = ({ address, donuts }) => {\n  const shorthand = address.substring(0,6) + '...' + address.substring(address.length - 4);\n\n  return (\n    <div className=\"nav\">\n      <div className=\"wallet\">\n        <div className=\"donut-bal\">{ shortNum(donuts) }  üç©</div>\n        <div className=\"address-container\">\n          <div className=\"short-address\">{ shorthand }</div>\n          <div className=\"jazz-icon\"><Jazzicon diameter={18} seed={jsNumberForAddress(address)} /></div>\n        </div>\n      </div>\n  </div>\n  )\n};\n\nexport default function WalletInfo(props) {\n  const [ address, setAddress ] = useState({});\n  const [ provider, setProvider ] = useState({});\n  const [ network, setNetwork ] = useState({});\n  const [ active, setActive ] = useState(false);\n  const [ donutBalance, setDonutBalance ] = useState();\n  \n  const handleConnect = async () => {\n    const active = await ConnetToWeb3();\n\n    if (active) {\n      setProvider(active.provider);\n      setAddress(active.address);\n      setNetwork(active.network);\n      setActive(true);\n      props.onConnect(true);\n    } else {\n      setActive(false);\n    }\n  }\n\n  useDonuts(active, provider, address, network).then((result)=>{ setDonutBalance(formatEther(result.donutBalance.toString())) });  \n  \n  return (\n    <div>\n      { !active ? <ConnectYourWalletButton connect={handleConnect} /> : <WalletDetails address={ address } donuts={ donutBalance } /> }\n    </div>\n  )\n\n};\n"]},"metadata":{},"sourceType":"module"}